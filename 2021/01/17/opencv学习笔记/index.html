<!DOCTYPE html>
<html lang="zh-CN">
<head>

 <!--pjax：防止跳转页面音乐暂停-->
  <script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script> 

  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xiangruihu.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"./public/search.xml"};
  </script>

  <meta name="description" content="1.ROI 选取12345678import cv2img &#x3D; cv2.imread(&amp;#x27;lena.jpg&amp;#x27;)# 帽子ROI的红色通道hat_r &#x3D; img[25:120, 50:220, 2]cv2.imshow(&amp;#x27;hat&amp;#x27;, hat_r)cv2.waitKey(0)">
<meta property="og:type" content="article">
<meta property="og:title" content="opencv学习笔记">
<meta property="og:url" content="https://xiangruihu.github.io/2021/01/17/opencv%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Grit&#39;s blog">
<meta property="og:description" content="1.ROI 选取12345678import cv2img &#x3D; cv2.imread(&amp;#x27;lena.jpg&amp;#x27;)# 帽子ROI的红色通道hat_r &#x3D; img[25:120, 50:220, 2]cv2.imshow(&amp;#x27;hat&amp;#x27;, hat_r)cv2.waitKey(0)">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-01-17T09:55:53.000Z">
<meta property="article:modified_time" content="2021-02-16T13:23:32.599Z">
<meta property="article:author" content="grit">
<meta property="article:tag" content="cv">
<meta property="article:tag" content="opencv">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://xiangruihu.github.io/2021/01/17/opencv%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>opencv学习笔记 | Grit's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<!-- 樱花特效 -->
  

</head>


<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    <a target="_blank" rel="noopener" href="https://github.com/xiangruiA" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Grit's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description"> 爱自已，是一生浪漫的开始。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-guestbook">

    <a href="/guestbook/" rel="section"><i class="comment fa-fw"></i>留言板</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiangruihu.github.io/2021/01/17/opencv%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="grit">
      <meta itemprop="description" content="身体和灵魂总要有一个在路上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Grit's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          opencv学习笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-17 17:55:53" itemprop="dateCreated datePublished" datetime="2021-01-17T17:55:53+08:00">2021-01-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-16 21:23:32" itemprop="dateModified" datetime="2021-02-16T21:23:32+08:00">2021-02-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/cv/" itemprop="url" rel="index"><span itemprop="name">cv</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/01/17/opencv%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/01/17/opencv%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>10k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">

阅读时长 &asymp;

</span>
              <span>9 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">


      
        <h3 id="1-ROI-选取"><a href="#1-ROI-选取" class="headerlink" title="1.ROI 选取"></a>1.ROI 选取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;lena.jpg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 帽子ROI的红色通道</span></span><br><span class="line">hat_r = img[<span class="number">25</span>:<span class="number">120</span>, <span class="number">50</span>:<span class="number">220</span>, <span class="number">2</span>]</span><br><span class="line">cv2.imshow(<span class="string">&#x27;hat&#x27;</span>, hat_r)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="2-图像和像素点的简单处理"><a href="#2-图像和像素点的简单处理" class="headerlink" title="2.图像和像素点的简单处理"></a>2.图像和像素点的简单处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line"></span><br><span class="line">img &#x3D; cv2.imread(&#39;lena.jpg&#39;)</span><br><span class="line"></span><br><span class="line"># 1.获取像素的值</span><br><span class="line">px &#x3D; img[100, 90]</span><br><span class="line">print(px)  # [103 98 197]</span><br><span class="line"></span><br><span class="line"># 只获取蓝色blue通道的值</span><br><span class="line">px_blue &#x3D; img[100, 90, 0]</span><br><span class="line">print(px_blue)  # 103</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2.修改像素的值</span><br><span class="line">img[100, 90] &#x3D; [255, 255, 255]</span><br><span class="line">print(img[100, 90])  # [255 255 255]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3.图片形状</span><br><span class="line">print(img.shape)  # (263, 247, 3)</span><br><span class="line"># 形状中包括行数、列数和通道数</span><br><span class="line">height, width, channels &#x3D; img.shape</span><br><span class="line"># img是灰度图的话：height, width &#x3D; img.shape</span><br><span class="line"></span><br><span class="line"># 总像素数</span><br><span class="line">print(img.size)  # 263*247*3&#x3D;194883</span><br><span class="line"># 数据类型</span><br><span class="line">print(img.dtype)  # uint8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 4.ROI截取</span><br><span class="line">face &#x3D; img[100:200, 115:188]</span><br><span class="line">cv2.imshow(&#39;face&#39;, face)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 5.通道分割与合并</span><br><span class="line">b, g, r &#x3D; cv2.split(img)</span><br><span class="line">img &#x3D; cv2.merge((b, g, r))</span><br><span class="line"># 更推荐的获取某一通道方式</span><br><span class="line">b &#x3D; img[:, :, 0]</span><br><span class="line">cv2.imshow(&#39;b&#39;, b)</span><br><span class="line">cv2.waitKey(0)</span><br></pre></td></tr></table></figure>
<h3 id="3-改变色彩空间"><a href="#3-改变色彩空间" class="headerlink" title="3.改变色彩空间"></a>3.改变色彩空间</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line">img&#x3D;cv2.imread(&#39;lena.jpg&#39;)</span><br><span class="line"></span><br><span class="line">#转灰度图片</span><br><span class="line">img_hsv&#x3D;cv2.cvtColor(img,cv2.COLOR_BGR2HSV)</span><br><span class="line"></span><br><span class="line">cv2.imshow(&#39;hsv&#39;,img_hsv)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line">img_gray&#x3D;cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)</span><br><span class="line">cv2.imshow(&#39;gray&#39;,img_gray)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line">#获取所有转换模式</span><br><span class="line">flags&#x3D;[i for i in dir(cv2) if i.startswith(&quot;COLOR_&quot;)]</span><br><span class="line">print(flags)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#获取蓝色的HSV</span><br><span class="line"></span><br><span class="line">blue &#x3D;np.uint8([[[255,0,0]]])</span><br><span class="line">hsv_blue &#x3D; cv2.cvtColor(blue,cv2.COLOR_BGR2HSV)</span><br><span class="line">print(hsv_blue)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#追踪蓝色的物体</span><br><span class="line">capature &#x3D;cv2.VideoCapture(0)</span><br><span class="line"></span><br><span class="line">#蓝色范围</span><br><span class="line">blue_lower &#x3D;np.array([100,110,110])</span><br><span class="line">blue_upper &#x3D; np.array([130,255,255])</span><br><span class="line"></span><br><span class="line">while(True):</span><br><span class="line">    ret,frame&#x3D; capature.read()</span><br><span class="line">    gray2&#x3D;cv2.cvtColor(frame,cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">    # 又BGR 转换为HSV</span><br><span class="line">    hsv &#x3D; cv2.cvtColor(frame,cv2.COLOR_BGR2HSV)</span><br><span class="line"></span><br><span class="line">    #将hsv设置为介于两者之间的</span><br><span class="line"></span><br><span class="line">    mask &#x3D; cv2.inRange(hsv,blue_lower,blue_upper)</span><br><span class="line"></span><br><span class="line">    #只保留图片中的蓝色部分</span><br><span class="line">    res &#x3D; cv2.bitwise_and(frame,frame,mask&#x3D;mask)</span><br><span class="line"></span><br><span class="line">    cv2.imshow(&#39;frame&#39;,frame)</span><br><span class="line">    cv2.imshow(&#39;mask&#39;,mask)</span><br><span class="line">    cv2.imshow(&#39;res&#39;,res)</span><br><span class="line">    cv2.imshow(&#39;gary&#39;,gray2)</span><br><span class="line">    if cv2.waitKey(1) &#x3D;&#x3D; ord(&#39;q&#39;):</span><br><span class="line">        break</span><br></pre></td></tr></table></figure>
<h3 id="4-对图像进行阈值操作"><a href="#4-对图像进行阈值操作" class="headerlink" title="4.对图像进行阈值操作"></a>4.对图像进行阈值操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">import cv2 as cv</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">#灰度图片读入</span><br><span class="line">img &#x3D; cv.imread(&#39;gradient.jpg&#39;,0)</span><br><span class="line">&#39;&#39;&#39;filename：需要打开图片的路径，可以是绝对路径或者相对路径，路径中不能出现中文。</span><br><span class="line">flag：图像的通道和色彩信息（默认值为1）。</span><br><span class="line">flag &#x3D; -1,   8位深度，原通道</span><br><span class="line">flag &#x3D; 0，   8位深度，1通道</span><br><span class="line">flag &#x3D; 1，   8位深度，3通道</span><br><span class="line">flag &#x3D; 2，   原深度， 1通道</span><br><span class="line">flag &#x3D; 3，   原深度， 3通道</span><br><span class="line">flag &#x3D; 4，   8位深度，3通道&#39;&#39;&#39;</span><br><span class="line">#阈值分割，ret return value 表示当前阈值</span><br><span class="line">ret,th &#x3D;cv.threshold(img,127,255,cv.THRESH_BINARY)</span><br><span class="line">&#39;&#39;&#39;cv2.threshold(img, thresh, maxVal, cv2.xxx)</span><br><span class="line">1</span><br><span class="line">第一个参数是源图像，应该是灰度图；</span><br><span class="line">第二个参数是对图像进行分类的阈值；</span><br><span class="line">第三个参数是最大值，表示如果像素值大于（有时小于）阈值则要给出的值；</span><br><span class="line">第四个参数决定给出不同类型的阈值。包括：</span><br><span class="line">cv2.THRESH_BINARY</span><br><span class="line">- cv2.THRESH_BINARY_INV</span><br><span class="line">- cv2.THRESH_TRUNC</span><br><span class="line">- cv2.THRESH_TOZERO</span><br><span class="line">- cv2.THRESH_TOZERO_INV&#39;&#39;&#39;</span><br><span class="line">#图像二值化处理后</span><br><span class="line">cv.imshow(&#39;thresh&#39;,th)</span><br><span class="line">#未经过二值化处理的图片</span><br><span class="line">cv.imshow(&#39;org&#39;,img)</span><br><span class="line">cv.waitKey(0)</span><br><span class="line"># 应用5种不同的阈值方法</span><br><span class="line">ret, th1 &#x3D; cv.threshold(img, 127, 255, cv.THRESH_BINARY)</span><br><span class="line">ret, th2 &#x3D; cv.threshold(img, 127, 255, cv.THRESH_BINARY_INV)</span><br><span class="line">ret, th3 &#x3D; cv.threshold(img, 127, 255, cv.THRESH_TRUNC)</span><br><span class="line">ret, th4 &#x3D; cv.threshold(img, 127, 255, cv.THRESH_TOZERO)</span><br><span class="line">ret, th5 &#x3D; cv.threshold(img, 127, 255, cv.THRESH_TOZERO_INV)</span><br><span class="line">titles &#x3D; [&#39;Original&#39;, &#39;BINARY&#39;, &#39;BINARY_INV&#39;, &#39;TRUNC&#39;, &#39;TOZERO&#39;, &#39;TOZERO_INV&#39;]</span><br><span class="line">images &#x3D; [img, th1, th2, th3, th4, th5]</span><br><span class="line">for i in range(6):</span><br><span class="line">    plt.subplot(2, 3, i + 1)</span><br><span class="line">    plt.imshow(images[i], &#39;gray&#39;)</span><br><span class="line">    plt.title(titles[i], fontsize&#x3D;8)</span><br><span class="line">    plt.xticks([]), plt.yticks([])  # 隐藏坐标轴</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#自适应阈值对比固定阈值</span><br><span class="line"></span><br><span class="line">#固定阈值</span><br><span class="line">ret,th1 &#x3D; cv.threshold(img,127,255,cv.THRESH_BINARY)</span><br><span class="line">#自适应阈值</span><br><span class="line">th2&#x3D;cv.adaptiveThreshold(</span><br><span class="line">    img,255,cv.ADAPTIVE_THRESH_GAUSSIAN_C,cv.THRESH_BINARY,11,4</span><br><span class="line">)</span><br><span class="line">th3&#x3D;cv.adaptiveThreshold(</span><br><span class="line">    img,255,cv.ADAPTIVE_THRESH_GAUSSIAN_C,cv.THRESH_BINARY,17,6</span><br><span class="line">)</span><br><span class="line">titles &#x3D; [&#39;Original&#39;, &#39;Global(v &#x3D; 127)&#39;, &#39;Adaptive Mean&#39;, &#39;Adaptive Gaussian&#39;]</span><br><span class="line">images &#x3D; [img, th1, th2, th3]</span><br><span class="line"></span><br><span class="line">for i in range(4):</span><br><span class="line">    plt.subplot(2, 2, i + 1)</span><br><span class="line">    plt.imshow(images[i], &#39;gray&#39;)</span><br><span class="line">    plt.title(titles[i], fontsize&#x3D;8)</span><br><span class="line">    plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="5-图片几何化处理"><a href="#5-图片几何化处理" class="headerlink" title="5.图片几何化处理"></a>5.图片几何化处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import cv2</span><br><span class="line"></span><br><span class="line">img&#x3D; cv2.imread(&#39;drawing.jpg&#39;)</span><br><span class="line">#1将图片进行缩放</span><br><span class="line">res&#x3D;cv2.resize(img,(132,150))</span><br><span class="line">cv2.imshow(&#39;reshape&#39;,res)</span><br><span class="line">cv2.imshow(&#39;org&#39;,img)</span><br><span class="line">#2按照比例进行缩放，x，y轴都扩大为原来的两倍</span><br><span class="line">res2&#x3D;cv2.resize(img,None,fx&#x3D;2,fy&#x3D;2,interpolation&#x3D;cv2.INTER_LINEAR)</span><br><span class="line">cv2.imshow(&#39;res2&#39;,res2)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line">&#39;&#39;&#39;cv2.resize(src,dsize,dst&#x3D;None,fx&#x3D;None,fy&#x3D;None,interpolation&#x3D;None)</span><br><span class="line"></span><br><span class="line">scr:原图</span><br><span class="line"></span><br><span class="line">dsize：输出图像尺寸</span><br><span class="line"></span><br><span class="line">fx:沿水平轴的比例因子</span><br><span class="line"></span><br><span class="line">fy:沿垂直轴的比例因子</span><br><span class="line"></span><br><span class="line">interpolation：插值方法&#39;&#39;&#39;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.翻转图片</span><br><span class="line"></span><br><span class="line">dst&#x3D;cv2.flip(img,-1) #1 水平翻转  0 垂直翻转  -1 水平垂直翻转</span><br><span class="line">#np.hstack  横向并排，对比显示</span><br><span class="line">cv2.imshow(&#39;flip&#39;,np.hstack((img,dst)))</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#4.平移图片</span><br><span class="line">#得到图片的长和宽的像素</span><br><span class="line">rows,cols&#x3D; img.shape[:2]</span><br><span class="line"></span><br><span class="line">M &#x3D; np.float32([[1, 0, 100], [0, 1, 50]])#M 为一个2x3的矩阵 (为图片的变化矩阵)</span><br><span class="line">&#39;&#39;&#39;src - 输入图像。</span><br><span class="line">M - 变换矩阵。</span><br><span class="line">dsize - 输出图像的大小。</span><br><span class="line">flags - 插值方法的组合（int 类型！）</span><br><span class="line">borderMode - 边界像素模式（int 类型！）</span><br><span class="line">borderValue - （重点！）边界填充值; 默认情况下，它为0。</span><br><span class="line">上述参数中：</span><br><span class="line">1、M作为仿射变换矩阵，一般反映平移或旋转的关系，为InputArray类型的2×3的变换矩阵。</span><br><span class="line">2、flages表示插值方式，默认为 flags&#x3D;cv2.INTER_LINEAR，表示线性插值，此外还有：cv2.INTER_NEAREST（最近邻插值） cv2.INTER_AREA （区域插值） cv2.INTER_CUBIC（三次样条插值） cv2.INTER_LANCZOS4（Lanczos插值）&#39;&#39;&#39;</span><br><span class="line">dst &#x3D; cv2.warpAffine(img, M, (cols, rows))</span><br><span class="line"></span><br><span class="line">cv2.imshow(&#39;shift&#39;, dst)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line">#5.将图片顺时针旋转，并且缩小一半</span><br><span class="line">M&#x3D;cv2.getRotationMatrix2D((cols&#x2F;2,rows&#x2F;2),-45,0.5)</span><br><span class="line">&#39;&#39;&#39;M&#x3D;cv2.getRotationMatrix2D(center, angle, scale)</span><br><span class="line">1</span><br><span class="line">函数有三个输入参数：</span><br><span class="line"></span><br><span class="line">center：图片的旋转中心</span><br><span class="line">angle：旋转角度</span><br><span class="line">scale：旋转后图像相比原来的缩放比例</span><br><span class="line">M:计算得到的旋转矩阵&#39;&#39;&#39;</span><br><span class="line"></span><br><span class="line">dst&#x3D;cv2.warpAffine(img,M,(cols,rows))</span><br><span class="line">cv2.imshow(&#39;rotation&#39;,dst)</span><br><span class="line">cv2.waitKey(0)</span><br></pre></td></tr></table></figure>
<h3 id="6-图形绘制"><a href="#6-图形绘制" class="headerlink" title="6.图形绘制"></a>6.图形绘制</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">#创建一个黑色图片</span><br><span class="line">img &#x3D;np.zeros((512,512,3),np.uint8)</span><br><span class="line"></span><br><span class="line">#创建一条宽度为5的蓝色斜线  参数起点 终点</span><br><span class="line">cv2.line(img,(0,0),(512,512),5)</span><br><span class="line"></span><br><span class="line">#画一个绿色边框的矩形，参数 左上角，右下角</span><br><span class="line">cv2.rectangle(img,(300,0),(500,100),(0,255,0),3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#画一个填充红色的圆，参数 圆心坐标，半径</span><br><span class="line">cv2.circle(img,(447,63),63,(255,0,0),-1)</span><br><span class="line"></span><br><span class="line"># 4.在图中心画一个填充的半圆</span><br><span class="line">cv2.ellipse(img, (256, 256), (100, 50), 0, 0, 180, (255, 0, 0), -1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 5.画一个闭合的四边形</span><br><span class="line"># 定义四个顶点坐标</span><br><span class="line">pts &#x3D; np.array([[10, 5],  [50, 10], [70, 20], [20, 30]], np.int32)</span><br><span class="line"># 顶点个数：4，矩阵变成顶点数*1*2维（注意numpy中-1的用法）</span><br><span class="line">pts &#x3D; pts.reshape((-1, 1, 2))</span><br><span class="line">cv2.polylines(img, [pts], True, (0, 255, 255))</span><br><span class="line"></span><br><span class="line"># 使用cv2.polylines()画多条直线</span><br><span class="line">line1 &#x3D; np.array([[100, 20],  [300, 20]], np.int32).reshape((-1, 1, 2))</span><br><span class="line">line2 &#x3D; np.array([[100, 60],  [300, 60]], np.int32).reshape((-1, 1, 2))</span><br><span class="line">line3 &#x3D; np.array([[100, 100],  [300, 100]], np.int32).reshape((-1, 1, 2))</span><br><span class="line">cv2.polylines(img, [line1, line2, line3], True, (0, 255, 255))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 6.添加文字</span><br><span class="line">font &#x3D; cv2.FONT_HERSHEY_SIMPLEX</span><br><span class="line">cv2.putText(img, &#39;ex2tron&#39;, (10, 500), font,</span><br><span class="line">            4, (255, 255, 255), 2, lineType&#x3D;cv2.LINE_AA)</span><br><span class="line"></span><br><span class="line">cv2.imshow(&#39;img&#39;, img)</span><br><span class="line">cv2.waitKey(0)</span><br></pre></td></tr></table></figure>
<h3 id="7-图形融合"><a href="#7-图形融合" class="headerlink" title="7.图形融合"></a>7.图形融合</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line">#1.图片相加</span><br><span class="line">x &#x3D; np.uint8([255])</span><br><span class="line">y &#x3D; np.uint8([10])</span><br><span class="line"></span><br><span class="line">print(cv2.add(x,y))# 250+10 &#x3D; 260 &#x3D;&gt; 255 超过了255按照255算 没有超过255 按计算值算</span><br><span class="line">print(x+y)# 250+10 &#x3D; 260 % 256 &#x3D; 4  numpy 中的图片相加相当于%256</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.图像混合</span><br><span class="line">img1&#x3D;cv2.imread(&#39;lena_small.jpg&#39;)</span><br><span class="line">img2&#x3D;cv2.imread(&#39;opencv-logo-white.png&#39;)</span><br><span class="line">res&#x3D;cv2.addWeighted(img1,.6,img2,.4,0)</span><br><span class="line">cv2.imshow(&#39;blending&#39;,res)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.按位操作</span><br><span class="line">img1&#x3D;cv2.imread(&#39;lena.jpg&#39;)</span><br><span class="line">img2&#x3D;cv2.imread(&#39;opencv-logo-white.png&#39;)</span><br><span class="line">#把logo放在左上角</span><br><span class="line">rows,cows&#x3D;img2.shape[:2]</span><br><span class="line">roi&#x3D;img1[:rows,:cows]</span><br><span class="line"></span><br><span class="line">#创建掩膜</span><br><span class="line">img2gray&#x3D;cv2.cvtColor(img2,cv2.COLOR_BGR2GRAY)</span><br><span class="line">ret,mask &#x3D;cv2.threshold(img2gray,10,255,cv2.THRESH_BINARY)</span><br><span class="line">mask_inv&#x3D;cv2.bitwise_not(mask)</span><br><span class="line"># 保留除logo外的背景</span><br><span class="line">img1_bg &#x3D; cv2.bitwise_and(roi, roi, mask&#x3D;mask_inv)</span><br><span class="line">dst &#x3D; cv2.add(img1_bg, img2)  # 进行融合</span><br><span class="line">img1[:rows, :cows] &#x3D; dst  # 融合后放在原图上</span><br><span class="line"></span><br><span class="line">cv2.imshow(&#39;result&#39;, img1)</span><br><span class="line">cv2.waitKey(0)</span><br></pre></td></tr></table></figure>
<h3 id="8-图片滤波"><a href="#8-图片滤波" class="headerlink" title="8.图片滤波"></a>8.图片滤波</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line">img&#x3D;cv2.imread(&#39;lena.jpg&#39;)</span><br><span class="line">#1.均值滤波</span><br><span class="line">blur&#x3D;cv2.blur(img,(12,12))#卷积核尺寸  可以明显观察到经过滤波后的图片模糊很多</span><br><span class="line">cv2.imshow(&#39;img&#39;,img)</span><br><span class="line">cv2.imshow(&#39;blur&#39;,blur)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line">#2.高斯滤波</span><br><span class="line">gau_blur&#x3D;cv2.GaussianBlur(img,(3,3),0)#(3,3)表示高斯矩阵的长和宽都是5，标准差为0</span><br><span class="line"></span><br><span class="line">#三张图片横向对比</span><br><span class="line">res &#x3D; np.hstack((img,blur,gau_blur))</span><br><span class="line">cv2.imshow(&#39;res&#39;,res)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line">#高斯滤波与均值滤波</span><br><span class="line">img&#x3D;cv2.imread(&#39;salt_noise.bmp&#39;)</span><br><span class="line">blur&#x3D;cv2.blur(img,(5,5)) #均值滤波</span><br><span class="line">gaussian &#x3D; cv2.GaussianBlur(img,(5,5),1) #高斯滤波</span><br><span class="line">res &#x3D; np.hstack((img,blur,gaussian))</span><br><span class="line">cv2.imshow(&#39;img,blur,gaussian&#39;,res)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#均值滤波与中值滤波</span><br><span class="line">img&#x3D;cv2.imread(&#39;salt_noise.bmp&#39;,0)</span><br><span class="line"></span><br><span class="line">blur &#x3D; cv2.blur(img, (5, 5))  # 均值滤波</span><br><span class="line">median &#x3D; cv2.medianBlur(img, 5)  # 中值滤波</span><br><span class="line"></span><br><span class="line">res &#x3D; np.hstack((img, blur, median))</span><br><span class="line">cv2.imshow(&#39;median vs average&#39;, res)</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line"># 4.双边滤波vs高斯滤波</span><br><span class="line">img &#x3D; cv2.imread(&#39;lena.jpg&#39;, 0)</span><br><span class="line">gau &#x3D; cv2.GaussianBlur(img, (5, 5), 0)  # 高斯滤波</span><br><span class="line">blur &#x3D; cv2.bilateralFilter(img, 5, 75, 75)  # 双边滤波</span><br><span class="line"></span><br><span class="line">res &#x3D; np.hstack((img, gau, blur))</span><br><span class="line">cv2.imshow(&#39;res&#39;, res)</span><br><span class="line">cv2.waitKey(0)</span><br></pre></td></tr></table></figure>
<h3 id="9-边缘检测1"><a href="#9-边缘检测1" class="headerlink" title="9.边缘检测1"></a>9.边缘检测1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">#边缘检测</span><br><span class="line">img &#x3D; cv2.imread(&#39;handwriting.jpg&#39;,0)</span><br><span class="line">edges &#x3D;cv2.Canny(img,30,70)</span><br><span class="line">cv2.imshow(&#39;img_edges&#39;,np.hstack((img,edges)))</span><br><span class="line">cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.先阈值后边缘检测</span><br><span class="line">_,thresh &#x3D;cv2.threshold(img,0,255,cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br><span class="line">edges &#x3D; cv2.Canny(thresh,30,70)</span><br><span class="line"></span><br><span class="line">cv2.imshow(&#39;canny&#39;,np.hstack((img,thresh,edges)))</span><br><span class="line">cv2.waitKey(0)</span><br></pre></td></tr></table></figure>
<h3 id="10-边缘检测2"><a href="#10-边缘检测2" class="headerlink" title="10.边缘检测2"></a>10.边缘检测2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">def track_back(x):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">img &#x3D;cv2.imread(&#39;sudoku.jpg&#39;,0)</span><br><span class="line">cv2.namedWindow(&#39;window&#39;)</span><br><span class="line"></span><br><span class="line">#创建滑动条</span><br><span class="line">cv2.createTrackbar(&#39;maxVal&#39;,&#39;window&#39;,100,255,track_back)</span><br><span class="line">cv2.createTrackbar(&#39;minVal&#39;,&#39;window&#39;,200,255,track_back)</span><br><span class="line"></span><br><span class="line">while(True):</span><br><span class="line">    #获取滑动条的值</span><br><span class="line">    max_val&#x3D;cv2.getTrackbarPos(&#39;maxVal&#39;,&#39;window&#39;)</span><br><span class="line">    min_val&#x3D;cv2.getTrackbarPos(&#39;minVal&#39;,&#39;window&#39;)</span><br><span class="line"></span><br><span class="line">    edges&#x3D; cv2.Canny(img,min_val,max_val)</span><br><span class="line">    cv2.imshow(&#39;window&#39;,edges)</span><br><span class="line">    if cv2.waitKey(30)&#x3D;&#x3D;27:</span><br><span class="line">        break</span><br></pre></td></tr></table></figure>
<h3 id="11-腐蚀和膨胀处理"><a href="#11-腐蚀和膨胀处理" class="headerlink" title="11.腐蚀和膨胀处理"></a>11.腐蚀和膨胀处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">#1.腐蚀和膨胀</span><br><span class="line">img &#x3D; cv2.imread(&#39;j.bmp&#39;,0)</span><br><span class="line">kernel &#x3D;np.ones((5,5),np.uint8)</span><br><span class="line">erosion &#x3D;cv2.erode(img,kernel)#腐蚀</span><br><span class="line">dilation &#x3D; cv2.dilate(img,kernel) #膨胀</span><br><span class="line"></span><br><span class="line">cv2.imshow(&#39;erosion&#x2F;dilation&#39;,np.hstack((img,erosion,dilation)))</span><br><span class="line">cv2.waitKey(0)</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/cv/" rel="tag"># cv</a>
              <a href="/tags/opencv/" rel="tag"># opencv</a>

 <!-- 文章结束表示语-->
    <div>
      
        <div>
    
        <div style="text-align:center;color: #636363;font-size:14px;letter-spacing: 10px">本文结束啦<i class="fa fa-bell"></i>感谢您的阅读</div>
    
</div>
      
    </div>


          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/07/07/%E5%90%B4%E6%81%A9%E8%BE%BE%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="prev" title="吴恩达机器学习笔记">
      <i class="fa fa-chevron-left"></i> 吴恩达机器学习笔记
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/02/07/%E6%9C%88%E4%BA%AE%E4%B8%8E%E5%85%AD%E4%BE%BF%E5%A3%AB/" rel="next" title="月亮与六便士">
      月亮与六便士 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
    <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

<embed id="musicplayer" frameborder="no" border="0" marginwidth="0" marginheight="0" width=298 height=52 src="//music.163.com/outchain/player?type=2&id=33756016&auto=1&height=32"></embed>
  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-ROI-%E9%80%89%E5%8F%96"><span class="nav-text">1.ROI 选取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%9B%BE%E5%83%8F%E5%92%8C%E5%83%8F%E7%B4%A0%E7%82%B9%E7%9A%84%E7%AE%80%E5%8D%95%E5%A4%84%E7%90%86"><span class="nav-text">2.图像和像素点的简单处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%94%B9%E5%8F%98%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4"><span class="nav-text">3.改变色彩空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%AF%B9%E5%9B%BE%E5%83%8F%E8%BF%9B%E8%A1%8C%E9%98%88%E5%80%BC%E6%93%8D%E4%BD%9C"><span class="nav-text">4.对图像进行阈值操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%9B%BE%E7%89%87%E5%87%A0%E4%BD%95%E5%8C%96%E5%A4%84%E7%90%86"><span class="nav-text">5.图片几何化处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6"><span class="nav-text">6.图形绘制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E5%9B%BE%E5%BD%A2%E8%9E%8D%E5%90%88"><span class="nav-text">7.图形融合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%9B%BE%E7%89%87%E6%BB%A4%E6%B3%A2"><span class="nav-text">8.图片滤波</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B1"><span class="nav-text">9.边缘检测1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B2"><span class="nav-text">10.边缘检测2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-%E8%85%90%E8%9A%80%E5%92%8C%E8%86%A8%E8%83%80%E5%A4%84%E7%90%86"><span class="nav-text">11.腐蚀和膨胀处理</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="grit"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">grit</p>
  <div class="site-description" itemprop="description">身体和灵魂总要有一个在路上</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="sidebar-button motion-element"><i class="fa fa-comment"></i>
    Chat
  </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiangruiA" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiangruiA" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/weixin_46108138" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_46108138" rel="noopener" target="_blank"><i class="book fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=2543344628@qq.com" title="E - Mail → https:&#x2F;&#x2F;mail.qq.com&#x2F;cgi-bin&#x2F;qm_share?t&#x3D;qm_mailme&amp;email&#x3D;2543344628@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E - Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">grit</span>

    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">99k</span>
    <div class="powered-by">
    <i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
       本站访客数:<span id="busuanzi_value_site_uv"></span>
    </span>
    </div>

   <span class="post-meta-divider">|</span>
   
   <span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
   </span>


   

    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:30</span>
</div>

    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<span id="sitetime"></span>
<script language=javascript>
	function siteTime(){
		window.setTimeout("siteTime()", 1000);
		var seconds = 1000;
		var minutes = seconds * 60;
		var hours = minutes * 60;
		var days = hours * 24;
		var years = days * 365;
		var today = new Date();
		var todayYear = today.getFullYear();
		var todayMonth = today.getMonth()+1;
		var todayDate = today.getDate();
		var todayHour = today.getHours();
		var todayMinute = today.getMinutes();
		var todaySecond = today.getSeconds();
		/* 
		Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
		year - 作为date对象的年份，为4位年份值
		month - 0-11之间的整数，做为date对象的月份
		day - 1-31之间的整数，做为date对象的天数
		hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
		minutes - 0-59之间的整数，做为date对象的分钟数
		seconds - 0-59之间的整数，做为date对象的秒数
		microseconds - 0-999之间的整数，做为date对象的毫秒数
        */
		var t1 = Date.UTC(2020,02,13,15,00,00); //北京时间2018-2-13 00:00:00
		var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
		var diff = t2-t1;
		var diffYears = Math.floor(diff/years);
		var diffDays = Math.floor((diff/days)-diffYears*365);
		var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
		var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
		var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
		document.getElementById("sitetime").innerHTML=" 已运行"+/*diffYears+" 年 "+*/diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 "+diffSeconds+" 秒";
	}
	siteTime();
</script>


        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>


  




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'qzNLqU1UIaQIMaCBaFi4SaRM-gzGzoHsz',
      appKey     : 'vYdThgQ0euJt90NlkPCUkIBY',
      placeholder: "欢迎留言",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>